{"version":3,"sources":["StripeProvider.tsx"],"names":["EXPO_PARTNER_ID","repository","pjson","appInfo","name","url","version","partnerId","undefined","initStripe","params","extendedParams","NativeStripeSdk","initialise","StripeProvider","children","publishableKey","merchantIdentifier","threeDSecureParams","stripeAccountId","urlScheme","setUrlSchemeOnAndroid","ttApiKey","ttApiVersion","isAndroid"],"mappings":"2WAAA,qDAEA,2EACA,mCAOA,mE,0/BAEA,GAAMA,CAAAA,eAAe,CAAG,2BAAxB,CAiBA,GAAMC,CAAAA,UAAe,CAAGC,iBAAMD,UAA9B,CAEA,GAAME,CAAAA,OAAgB,CAAG,CACvBC,IAAI,CAAE,mCAA2BF,iBAAME,IAAjC,SAA+CF,iBAAME,IADpC,CAKvBC,GAAG,CAAEJ,UAAU,CAACI,GAAX,EAAkBJ,UALA,CAMvBK,OAAO,CAAEJ,iBAAMI,OANQ,CAOvBC,SAAS,CAAE,mCAAwBP,eAAxB,CAA0CQ,SAP9B,CAAzB,CAUO,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAAOC,MAAP,0IAClBC,cADkB,0BACsBD,MADtB,EAC8BP,OAAO,CAAPA,OAD9B,GAExBS,yBAAgBC,UAAhB,CAA2BF,cAA3B,EAFwB,qEAAnB,C,8BAyBA,QAASG,CAAAA,cAAT,MAUG,IATRC,CAAAA,QASQ,MATRA,QASQ,CARRC,cAQQ,MARRA,cAQQ,CAPRC,kBAOQ,MAPRA,kBAOQ,CANRC,kBAMQ,MANRA,kBAMQ,CALRC,eAKQ,MALRA,eAKQ,CAJRC,SAIQ,MAJRA,SAIQ,CAHRC,qBAGQ,MAHRA,qBAGQ,CAFRC,QAEQ,MAFRA,QAEQ,CADRC,YACQ,MADRA,YACQ,CACR,qBAAU,UAAM,CACd,GAAI,CAACP,cAAL,CAAqB,CACnB,OACD,CACD,GAAIQ,kBAAJ,CAAe,CACbZ,yBAAgBC,UAAhB,CAA2B,CACzBG,cAAc,CAAdA,cADyB,CAEzBb,OAAO,CAAPA,OAFyB,CAGzBgB,eAAe,CAAfA,eAHyB,CAIzBD,kBAAkB,CAAlBA,kBAJyB,CAKzBE,SAAS,CAATA,SALyB,CAMzBC,qBAAqB,CAArBA,qBANyB,CAOzBC,QAAQ,CAARA,QAPyB,CAQzBC,YAAY,CAAZA,YARyB,CAA3B,EAUD,CAXD,IAWO,CACLX,yBAAgBC,UAAhB,CAA2B,CACzBG,cAAc,CAAdA,cADyB,CAEzBb,OAAO,CAAPA,OAFyB,CAGzBgB,eAAe,CAAfA,eAHyB,CAIzBD,kBAAkB,CAAlBA,kBAJyB,CAKzBD,kBAAkB,CAAlBA,kBALyB,CAMzBG,SAAS,CAATA,SANyB,CAOzBG,YAAY,CAAZA,YAPyB,CAQzBD,QAAQ,CAARA,QARyB,CAA3B,EAUD,CACF,CA3BD,CA2BG,CACDN,cADC,CAEDC,kBAFC,CAGDE,eAHC,CAIDD,kBAJC,CAKDE,SALC,CAMDC,qBANC,CAODC,QAPC,CAQDC,YARC,CA3BH,EAsCA,MAAO,2DAAGP,cAAc,CAAGD,QAAH,CAAc,IAA/B,CAAP,CACD","sourcesContent":["import React, { useEffect } from 'react';\n\nimport NativeStripeSdk from '../NativeStripeSdk';\nimport { isAndroid, shouldAttributeExpo } from '../helpers';\nimport type {\n  AppInfo,\n  ThreeDSecureConfigurationParams,\n  InitStripeParams,\n  InitialiseParams,\n} from '../types';\nimport pjson from '../../package.json';\n\nconst EXPO_PARTNER_ID = 'pp_partner_JBN7LkABco2yUu';\n\n/**\n *  Stripe Provider Component Props\n */\nexport interface Props {\n  publishableKey: string;\n  merchantIdentifier?: string;\n  threeDSecureParams?: ThreeDSecureConfigurationParams;\n  stripeAccountId?: string;\n  children: React.ReactElement | React.ReactElement[];\n  urlScheme?: string;\n  setUrlSchemeOnAndroid?: boolean;\n  ttApiKey: string;\n  ttApiVersion: string;\n}\n\nconst repository: any = pjson.repository;\n\nconst appInfo: AppInfo = {\n  name: shouldAttributeExpo() ? `${pjson.name}/expo` : pjson.name,\n  // package.json output installed via npm is a bit different than from yarn\n  // the repository field can be an object or string\n  // for more context: https://github.com/stripe/stripe-react-native/issues/200\n  url: repository.url || repository,\n  version: pjson.version,\n  partnerId: shouldAttributeExpo() ? EXPO_PARTNER_ID : undefined,\n};\n\nexport const initStripe = async (params: InitStripeParams): Promise<void> => {\n  const extendedParams: InitialiseParams = { ...params, appInfo };\n  NativeStripeSdk.initialise(extendedParams);\n};\n\n/**\n *  StripeProvider Component\n *\n * @example\n * ```ts\n *  <StripeProvider\n *    publishableKey=\"_publishableKey\"\n *    merchantIdentifier=\"merchant.com.stripe.react.native\"\n *    threeDSecureParams={{\n *      backgroundColor: \"#FFF\",\n *      timeout: 5,\n *    }}\n *  >\n *    <App />\n *  </StripeProvider>\n * ```\n * @param __namedParameters Props\n * @returns JSX.Element\n * @category ReactComponents\n */\nexport function StripeProvider({\n  children,\n  publishableKey,\n  merchantIdentifier,\n  threeDSecureParams,\n  stripeAccountId,\n  urlScheme,\n  setUrlSchemeOnAndroid,\n  ttApiKey,\n  ttApiVersion,\n}: Props) {\n  useEffect(() => {\n    if (!publishableKey) {\n      return;\n    }\n    if (isAndroid) {\n      NativeStripeSdk.initialise({\n        publishableKey,\n        appInfo,\n        stripeAccountId,\n        threeDSecureParams,\n        urlScheme,\n        setUrlSchemeOnAndroid,\n        ttApiKey,\n        ttApiVersion,\n      });\n    } else {\n      NativeStripeSdk.initialise({\n        publishableKey,\n        appInfo,\n        stripeAccountId,\n        threeDSecureParams,\n        merchantIdentifier,\n        urlScheme,\n        ttApiVersion,\n        ttApiKey,\n      });\n    }\n  }, [\n    publishableKey,\n    merchantIdentifier,\n    stripeAccountId,\n    threeDSecureParams,\n    urlScheme,\n    setUrlSchemeOnAndroid,\n    ttApiKey,\n    ttApiVersion,\n  ]);\n\n  return <>{publishableKey ? children : null}</>;\n}\n"]}